{"remainingRequest":"C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\src\\components\\tables\\tables.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\src\\components\\tables\\tables.vue","mtime":1560074919386},{"path":"C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\.babelrc","mtime":1556246239000},{"path":"C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\HM\\Desktop\\体育管理后台前端\\SportsManagementBackground\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.number.constructor\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TablesEdit from \"./edit.vue\";\nimport handleBtns from \"./handle-btns\";\nimport \"./index.less\";\nexport default {\n  name: \"Tables\",\n  props: {\n    total: {\n      type: Number,\n      default: function _default() {\n        return [];\n      }\n    },\n    value: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    columns: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    size: String,\n    width: {\n      type: [Number, String]\n    },\n    height: {\n      type: [Number, String]\n    },\n    stripe: {\n      type: Boolean,\n      default: true\n    },\n    border: {\n      type: Boolean,\n      default: true\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    },\n    highlightRow: {\n      type: Boolean,\n      default: true\n    },\n    rowClassName: {\n      type: Function,\n      default: function _default() {\n        return \"\";\n      }\n    },\n    context: {\n      type: Object\n    },\n    noDataText: {\n      type: String\n    },\n    noFilteredDataText: {\n      type: String\n    },\n    disabledHover: {\n      type: Boolean\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n\n    /**\n     * @description 全局设置是否可编辑\n     */\n    editable: {\n      type: Boolean,\n      default: false\n    },\n\n    /**\n     * @description 是否可搜索\n     */\n    searchable: {\n      type: Boolean,\n      default: false\n    },\n\n    /**\n     * @description 搜索控件所在位置，'top' / 'bottom'\n     */\n    searchPlace: {\n      type: String,\n      default: \"top\"\n    }\n  },\n\n  /**\n   * Events\n   * @on-start-edit 返回值 {Object} ：同iview中render函数中的params对象 { row, index, column }\n   * @on-cancel-edit 返回值 {Object} 同上\n   * @on-save-edit 返回值 {Object} ：除上面三个参数外，还有一个value: 修改后的数据\n   */\n  data: function data() {\n    return {\n      insideColumns: [],\n      insideTableData: [],\n      edittingCellId: \"\",\n      edittingText: \"\",\n      searchValue: \"\",\n      searchKey: \"\",\n      insidePageSize: 10,\n      insidePageNum: 1\n    };\n  },\n  methods: {\n    suportEdit: function suportEdit(item, index) {\n      var _this = this;\n\n      item.render = function (h, params) {\n        return h(TablesEdit, {\n          props: {\n            params: params,\n            value: _this.insideTableData[params.index][params.column.key],\n            edittingCellId: _this.edittingCellId,\n            editable: _this.editable\n          },\n          on: {\n            input: function input(val) {\n              _this.edittingText = val;\n            },\n            \"on-start-edit\": function onStartEdit(params) {\n              _this.edittingCellId = \"editting-\".concat(params.index, \"-\").concat(params.column.key);\n\n              _this.$emit(\"on-start-edit\", params);\n            },\n            \"on-cancel-edit\": function onCancelEdit(params) {\n              _this.edittingCellId = \"\";\n\n              _this.$emit(\"on-cancel-edit\", params);\n            },\n            \"on-save-edit\": function onSaveEdit(params) {\n              _this.value[params.row.initRowIndex][params.column.key] = _this.edittingText;\n\n              _this.$emit(\"input\", _this.value);\n\n              _this.$emit(\"on-save-edit\", Object.assign(params, {\n                value: _this.edittingText\n              }));\n\n              _this.edittingCellId = \"\";\n            }\n          }\n        });\n      };\n\n      return item;\n    },\n    surportHandle: function surportHandle(item) {\n      var _this2 = this;\n\n      var options = item.options || [];\n      var insideBtns = [];\n      options.forEach(function (item) {\n        if (handleBtns[item]) insideBtns.push(handleBtns[item]);\n      });\n      var btns = item.button ? [].concat(insideBtns, item.button) : insideBtns;\n\n      item.render = function (h, params) {\n        params.tableData = _this2.value;\n        return h(\"div\", btns.map(function (item) {\n          return item(h, params, _this2);\n        }));\n      };\n\n      return item;\n    },\n    handleColumns: function handleColumns(columns) {\n      var _this3 = this;\n\n      this.insideColumns = columns.map(function (item, index) {\n        var res = item;\n        if (res.editable) res = _this3.suportEdit(res, index);\n        if (res.key === \"handle\") res = _this3.surportHandle(res);\n        return res;\n      });\n    },\n    setDefaultSearchKey: function setDefaultSearchKey() {\n      this.searchKey = this.columns[0].key !== \"handle\" ? this.columns[0].key : this.columns.length > 1 ? this.columns[1].key : \"\";\n    },\n    handleClear: function handleClear(e) {\n      if (e.target.value === \"\") this.insideTableData = this.value;\n    },\n    handleSearch: function handleSearch() {\n      var _this4 = this;\n\n      this.insideTableData = this.value.filter(function (item) {\n        return item[_this4.searchKey].toString().indexOf(_this4.searchValue.toString()) >= 0;\n      });\n      console.log(this.insideTableData);\n    },\n    handleTableData: function handleTableData() {\n      this.insideTableData = this.value.map(function (item, index) {\n        var res = item;\n        res.initRowIndex = index;\n        return res;\n      });\n    },\n    exportCsv: function exportCsv(params) {\n      this.$refs.tablesMain.exportCsv(params);\n    },\n    clearCurrentRow: function clearCurrentRow() {\n      this.$refs.talbesMain.clearCurrentRow();\n    },\n    PageChange: function PageChange(value) {\n      this.insidePageNum = value;\n      this.$emit(\"page-Change\", value);\n    },\n    HandlePageSize: function HandlePageSize(value) {\n      this.insidePageSize = value;\n      this.$emit(\"handle-PageSize\", value);\n    },\n    onCurrentChange: function onCurrentChange(currentRow, oldCurrentRow) {\n      this.$emit(\"on-current-change\", currentRow, oldCurrentRow);\n    },\n    onSelect: function onSelect(selection, row) {\n      this.$emit(\"on-select\", selection, row);\n    },\n    onSelectCancel: function onSelectCancel(selection, row) {\n      this.$emit(\"on-select-cancel\", selection, row);\n    },\n    onSelectAll: function onSelectAll(selection) {\n      this.$emit(\"on-select-all\", selection);\n    },\n    onSelectionChange: function onSelectionChange(selection) {\n      this.$emit(\"on-selection-change\", selection);\n    },\n    onSortChange: function onSortChange(column, key, order) {\n      this.$emit(\"on-sort-change\", column, key, order);\n    },\n    onFilterChange: function onFilterChange(row) {\n      this.$emit(\"on-filter-change\", row);\n    },\n    onRowClick: function onRowClick(row, index) {\n      this.$emit(\"on-row-click\", row, index);\n    },\n    onRowDblclick: function onRowDblclick(row, index) {\n      this.$emit(\"on-row-dblclick\", row, index);\n    },\n    onExpand: function onExpand(row, status) {\n      this.$emit(\"on-expand\", row, status);\n    }\n  },\n  watch: {\n    columns: function columns(_columns) {\n      this.handleColumns(_columns);\n      this.setDefaultSearchKey();\n    },\n    value: function value(val) {\n      this.handleTableData();\n      if (this.searchable) this.handleSearch();\n    }\n  },\n  mounted: function mounted() {\n    this.handleColumns(this.columns);\n    this.setDefaultSearchKey();\n    this.handleTableData();\n  }\n};",{"version":3,"sources":["tables.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div v-if=\"searchable && searchPlace === 'top'\" class=\"search-con search-con-top\">\n      <Select v-model=\"searchKey\" class=\"search-col\">\n        <Option\n          v-for=\"item in columns\"\n          v-if=\"item.key !== 'handle'\"\n          :value=\"item.key\"\n          :key=\"`search-col-${item.key}`\"\n        >{{ item.title }}</Option>\n      </Select>\n      <Input\n        @on-change=\"handleClear\"\n        clearable\n        placeholder=\"输入关键字搜索\"\n        class=\"search-input\"\n        v-model=\"searchValue\"\n      />\n      <Button @click=\"handleSearch\" class=\"search-btn\" type=\"primary\">\n        <Icon type=\"search\"/>&nbsp;&nbsp;搜索\n      </Button>\n    </div>\n    <Table\n      ref=\"tablesMain\"\n      :data=\"insideTableData\"\n      :columns=\"insideColumns\"\n      :stripe=\"stripe\"\n      :border=\"border\"\n      :show-header=\"showHeader\"\n      :width=\"width\"\n      :height=\"height\"\n      :loading=\"loading\"\n      :disabled-hover=\"disabledHover\"\n      :highlight-row=\"highlightRow\"\n      :row-class-name=\"rowClassName\"\n      :size=\"size\"\n      :no-data-text=\"noDataText\"\n      :no-filtered-data-text=\"noFilteredDataText\"\n      @on-current-change=\"onCurrentChange\"\n      @on-select=\"onSelect\"\n      @on-select-cancel=\"onSelectCancel\"\n      @on-select-all=\"onSelectAll\"\n      @on-selection-change=\"onSelectionChange\"\n      @on-sort-change=\"onSortChange\"\n      @on-filter-change=\"onFilterChange\"\n      @on-row-click=\"onRowClick\"\n      @on-row-dblclick=\"onRowDblclick\"\n      @on-expand=\"onExpand\"\n    >\n      <slot name=\"header\" slot=\"header\"></slot>\n      <slot name=\"footer\" slot=\"footer\"></slot>\n      <slot name=\"loading\" slot=\"loading\"></slot>\n    </Table>\n    <div style=\"margin: 10px;overflow: hidden\"></div>\n    <Page\n      :page-size=\"insidePageSize\"\n      :current=\"insidePageNum\"\n      :total=\"total\"\n      @on-change=\"PageChange\"\n      @on-page-size-change=\"HandlePageSize\"\n      show-total\n      show-elevator\n      show-sizer\n    />\n    <div v-if=\"searchable && searchPlace === 'bottom'\" class=\"search-con search-con-top\">\n      <Select v-model=\"searchKey\" class=\"search-col\">\n        <Option\n          v-for=\"item in columns\"\n          v-if=\"item.key !== 'handle'\"\n          :value=\"item.key\"\n          :key=\"`search-col-${item.key}`\"\n        >{{ item.title }}</Option>\n      </Select>\n      <Input placeholder=\"输入关键字搜索\" class=\"search-input\" v-model=\"searchValue\"/>\n      <Button class=\"search-btn\" type=\"primary\">\n        <Icon type=\"search\"/>&nbsp;&nbsp;搜索\n      </Button>\n    </div>\n    <a id=\"hrefToExportTable\" style=\"display: none;width: 0px;height: 0px;\"></a>\n  </div>\n</template>\n\n<script>\nimport TablesEdit from \"./edit.vue\";\nimport handleBtns from \"./handle-btns\";\nimport \"./index.less\";\nexport default {\n  name: \"Tables\",\n  props: {\n    total: {\n      type: Number,\n      default() {\n        return [];\n      }\n    },\n    value: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    columns: {\n      type: Array,\n      default() {\n        return [];\n      }\n    },\n    size: String,\n    width: {\n      type: [Number, String]\n    },\n    height: {\n      type: [Number, String]\n    },\n    stripe: {\n      type: Boolean,\n      default: true\n    },\n    border: {\n      type: Boolean,\n      default: true\n    },\n    showHeader: {\n      type: Boolean,\n      default: true\n    },\n    highlightRow: {\n      type: Boolean,\n      default: true\n    },\n    rowClassName: {\n      type: Function,\n      default() {\n        return \"\";\n      }\n    },\n    context: {\n      type: Object\n    },\n    noDataText: {\n      type: String\n    },\n    noFilteredDataText: {\n      type: String\n    },\n    disabledHover: {\n      type: Boolean\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * @description 全局设置是否可编辑\n     */\n    editable: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * @description 是否可搜索\n     */\n    searchable: {\n      type: Boolean,\n      default: false\n    },\n    /**\n     * @description 搜索控件所在位置，'top' / 'bottom'\n     */\n    searchPlace: {\n      type: String,\n      default: \"top\"\n    }\n  },\n  /**\n   * Events\n   * @on-start-edit 返回值 {Object} ：同iview中render函数中的params对象 { row, index, column }\n   * @on-cancel-edit 返回值 {Object} 同上\n   * @on-save-edit 返回值 {Object} ：除上面三个参数外，还有一个value: 修改后的数据\n   */\n  data() {\n    return {\n      insideColumns: [],\n      insideTableData: [],\n      edittingCellId: \"\",\n      edittingText: \"\",\n      searchValue: \"\",\n      searchKey: \"\",\n      insidePageSize: 10,\n      insidePageNum: 1\n    };\n  },\n  methods: {\n    suportEdit(item, index) {\n      item.render = (h, params) => {\n        return h(TablesEdit, {\n          props: {\n            params: params,\n            value: this.insideTableData[params.index][params.column.key],\n            edittingCellId: this.edittingCellId,\n            editable: this.editable\n          },\n          on: {\n            input: val => {\n              this.edittingText = val;\n            },\n            \"on-start-edit\": params => {\n              this.edittingCellId = `editting-${params.index}-${\n                params.column.key\n              }`;\n              this.$emit(\"on-start-edit\", params);\n            },\n            \"on-cancel-edit\": params => {\n              this.edittingCellId = \"\";\n              this.$emit(\"on-cancel-edit\", params);\n            },\n            \"on-save-edit\": params => {\n              this.value[params.row.initRowIndex][\n                params.column.key\n              ] = this.edittingText;\n              this.$emit(\"input\", this.value);\n              this.$emit(\n                \"on-save-edit\",\n                Object.assign(params, { value: this.edittingText })\n              );\n              this.edittingCellId = \"\";\n            }\n          }\n        });\n      };\n      return item;\n    },\n    surportHandle(item) {\n      let options = item.options || [];\n      let insideBtns = [];\n      options.forEach(item => {\n        if (handleBtns[item]) insideBtns.push(handleBtns[item]);\n      });\n      let btns = item.button ? [].concat(insideBtns, item.button) : insideBtns;\n      item.render = (h, params) => {\n        params.tableData = this.value;\n        return h(\"div\", btns.map(item => item(h, params, this)));\n      };\n      return item;\n    },\n    handleColumns(columns) {\n      this.insideColumns = columns.map((item, index) => {\n        let res = item;\n        if (res.editable) res = this.suportEdit(res, index);\n        if (res.key === \"handle\") res = this.surportHandle(res);\n        return res;\n      });\n    },\n    setDefaultSearchKey() {\n      this.searchKey =\n        this.columns[0].key !== \"handle\"\n          ? this.columns[0].key\n          : this.columns.length > 1\n          ? this.columns[1].key\n          : \"\";\n    },\n    handleClear(e) {\n      if (e.target.value === \"\") this.insideTableData = this.value;\n    },\n    handleSearch() {      \n      this.insideTableData = this.value.filter(\n        item => item[this.searchKey].toString().indexOf(this.searchValue.toString()) >= 0\n      );\n      console.log(this.insideTableData);\n    },\n    handleTableData() {\n      this.insideTableData = this.value.map((item, index) => {\n        let res = item;\n        res.initRowIndex = index;\n        return res;\n      });\n    },\n    exportCsv(params) {\n      this.$refs.tablesMain.exportCsv(params);\n    },\n    clearCurrentRow() {\n      this.$refs.talbesMain.clearCurrentRow();\n    },\n    PageChange(value) {\n      this.insidePageNum = value;\n      this.$emit(\"page-Change\", value);\n    },\n    HandlePageSize(value) {\n      this.insidePageSize = value;\n      this.$emit(\"handle-PageSize\", value);\n    },\n    onCurrentChange(currentRow, oldCurrentRow) {\n      this.$emit(\"on-current-change\", currentRow, oldCurrentRow);\n    },\n    onSelect(selection, row) {\n      this.$emit(\"on-select\", selection, row);\n    },\n    onSelectCancel(selection, row) {\n      this.$emit(\"on-select-cancel\", selection, row);\n    },\n    onSelectAll(selection) {\n      this.$emit(\"on-select-all\", selection);\n    },\n    onSelectionChange(selection) {\n      this.$emit(\"on-selection-change\", selection);\n    },\n    onSortChange(column, key, order) {\n      this.$emit(\"on-sort-change\", column, key, order);\n    },\n    onFilterChange(row) {\n      this.$emit(\"on-filter-change\", row);\n    },\n    onRowClick(row, index) {\n      this.$emit(\"on-row-click\", row, index);\n    },\n    onRowDblclick(row, index) {\n      this.$emit(\"on-row-dblclick\", row, index);\n    },\n    onExpand(row, status) {\n      this.$emit(\"on-expand\", row, status);\n    }\n  },\n  watch: {\n    columns(columns) {\n      this.handleColumns(columns);\n      this.setDefaultSearchKey();\n    },\n    value(val) {\n      this.handleTableData();\n      if (this.searchable) this.handleSearch();\n    }\n  },\n  mounted() {\n    this.handleColumns(this.columns);\n    this.setDefaultSearchKey();\n    this.handleTableData();\n  }\n};\n</script>\n"],"sourceRoot":"src/components/tables"}]}